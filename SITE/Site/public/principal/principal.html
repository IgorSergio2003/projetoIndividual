<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Rhythm</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="shortcut icon" href="./logo sem fundo.png" type="image/x-icon" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header>
      <div class="container">
        <img class="imagem" src="./logo.png" />

        <ul>
          <a href="../Home/index.html">Músicas</a>
          <a href="../SOBRE/sobre.html">Sobre</a>
          <button onclick="logoff()">Sair</button>
        </ul>
        
      </div>
    </header>
    <div id="container_corpo">
      <div class="perfil">
        <h1>Bem vindo</h1>
        <h2 id="texto_bemvindo"></h2>
      </div>

      <div class="container-votacao">
        <h1>Qual música você mais gosta?</h1>
        <div class="content-votacao">
          <div class="contentmus">
            <span>Your Power</span>
          <img src="./billie.jpg" onclick="btncant1()" >
        </div>
        <div class="contentmus">
          <span>Levitating</span>
          <img src="./dualipa.jpg" onclick="btncant2()" >
        </div>
        <div class="contentmus">
          <span>Peach</span>
          <img src="./justin.jpg" onclick="btncant3()" >
        </div>
        </div>
        <span id="textoVotacao"></span>
      </div>

     

      <div class="musicasfavoritas">
        
        <h1>Ranking das melhores músicas</h1>
        <br>
        <br>
     <div class="inputmusicas">
       Digite suas 3 músicas favoritas:<input id="in_musica" placeholder="Digite suas 3 músicas favoritas">
       <button onclick="ver_musicafav()">Ver Músicas favoritas</button>

       <span id="textomusica"></span>
     </div>
     
    
    </div>


      <div class="ranking">
        <h1>Ranking das melhores músicas</h1>
        <div class="graph">
          <canvas id="myChartPizza"></canvas>
        </div>
        <div id="resultadoranking"></div>
      </div>

    </div>
    <div class="btn-displays">
    <button onclick="descobrir()" id="btn_descobrir">Descobrir músicas</button>
    <button onclick="ranking()" id="btn_ranking" style="display: none">
      Ver ranking
    </button>
  </div>







  <div id="testevot"></div>
    <div id="mus_btn" class="corpo-musica" style="display: none">
      <div class="divmus">
        <div class="imagemcan">
          <div class="textoima">
            <br />
            Justin Bieber<br /><br />
            Peaches ft. Daniel Caesar, Giveon
          </div>
        </div>
        <audio
          src="./Justin Bieber - Peaches ft. Daniel Caesar, Giveon_160k.mp3"
          controls
        ></audio>
      </div>



      <div class="divmus">
        <div class="imagemcan2">
          <div class="textoima">
            <br />Billie Ellish <br /><br />
            Your Power
          </div>
        </div>
        <audio
          src="./Billie Eilish - Your Power (Lyrics)_160k.mp3"
          controls
        ></audio>
      </div>




      <div class="divmus">
        <div class="imagemcan3">
          <div class="textoima">
            <br />Dua Lipa <br /><br />
            Levitating ft. DaBaby
          </div>
        </div>
        <audio
          src="./Dua Lipa, DaBaby - Levitating (Lyrics)_160k.mp3"
          controls
        ></audio>
      </div>
    </div>
    




    <footer>
      <div class="textfooter">
        <br/>
        <br/>
        Contato: Rhythm@outlook.com
        <br/>
        Telefone: 97384573
        <br/>
        <br/>
        ©The Rhythm
      </div>
    </footer>

  </body>
  


  <script>

var votacaomus1 = 41;

var votacaomus2 = 20;

var votacaomus3 = 50;

var media = votacaomus1 + votacaomus2 + votacaomus3;

var media1 = (votacaomus1 * 100 / media).toFixed(0);
var media2 = (votacaomus2 * 100 / media).toFixed(0);
var media3 = (votacaomus3 * 100 / media).toFixed(0);



function btncant1(){
  textoVotacao.innerHTML = `${sessionStorage.nome_usuario_meuapp} Muito boa sua escolha, as músicas da Billie Ellish são muito boas.`


}
function btncant2(){
  textoVotacao.innerHTML = `${sessionStorage.nome_usuario_meuapp} que escolha boa, esse hit da Dua Lipa com o DaBaby está fazendo muito sucesso.`
  
}
function btncant3(){
  textoVotacao.innerHTML = `${sessionStorage.nome_usuario_meuapp} Música muito moa do Justin, esse novo albúm dele está ótimo!`
  
}


    const labelsPizza = ["Peaches - Justin Bieber","Power - Billie Ellish","Levitating - Dua Lipa"];

    
const dataPizza = {
labels: labelsPizza,
datasets: [
  {
  label: 'Quantidade de votos',
  backgroundColor: ["gray","yellow","red"],
  borderColor: 'white',
  
  data: [votacaomus1, votacaomus2,votacaomus3],
  
}
]
};  

const configPizza ={
type:"pie",
data: dataPizza,
options: {maintainAspectRatio: false},
};

var myChartPizza = new Chart(document.getElementById("myChartPizza"),configPizza);

  </script>
</html>

<script>



resultadoranking.innerHTML = `Levitating - ${media3}% , Peaches - ${media1}% , Your Power - ${media2}%`;

  function descobrir() {
    mus_btn.style.display = "block";
    btn_descobrir.style.display = "none";
    container_corpo.style.display = "none";
    btn_ranking.style.display = "block";
    window.scrollBy(0, -1500);
  }

  function ranking() {
    mus_btn.style.display = "none";
    btn_descobrir.style.display = "block";
    container_corpo.style.display = "block";
    btn_ranking.style.display = "none";
  }

  function logoff() {
    finalizar_sessao();
    sessionStorage.clear();
    window.location.href = "../LOGIN/login.html";
  }


  var lista_ranking = [];
function ver_musicafav(){
var rankMusica = Number(in_musica.value);
lista_ranking.push(rankMusica);

  for(var contador = 0; contador < lista_ranking.length; contador++){
    var rank = lista_ranking[contador]
    textomusica.innerHTML += `${rank}<br>`
  }
}


  texto_bemvindo.innerHTML = `<br>Olá ${sessionStorage.nome_usuario_meuapp} <br>
Fiquei sabendo em que você gosta de ${sessionStorage.generoFavorito_usuario}
<br>Gosta da música ${sessionStorage.musicaFavorita_usuario} do(a) artista ${sessionStorage.cantorFavorito_usuario}`;




</script>
